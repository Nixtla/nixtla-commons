name: Sync Nixtlaverse common docs 

on:
  push:
    branches: [main]

jobs:
  sync-contributing:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        library: [statsforecast]
    steps:
    - uses: actions/checkout@v2
    - name: Sync Repos Action
      uses: FedericoGarza/sync-repos@main
      with: 
        target-repo: Nixtla/${{ matrix.library }}
        target-path: nbs/docs/contribute/
        source-path: docs/contribute/*
        branch-name: feat/update-contributing-file
        github-token: ${{ secrets.TOKEN_GITHUB }}
        commit-message: "[docs]: synchronize contribute from nixtla-commons - Triggered by Github Workflows"

  sync-styles:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        library: [statsforecast]
    steps:
    - uses: actions/checkout@v2
    - name: Generate extra files
      run: source ./action_files/build-quarto-yml.sh statsforecast docs/getting-started/Getting_Started_short.ipynb
    - name: Sync Repos Action
      uses: FedericoGarza/sync-repos@main
      with: 
        target-repo: Nixtla/${{ matrix.library }}
        target-path: nbs/
        source-path: styles/*
        branch-name: feat/update-styles
        github-token: ${{ secrets.TOKEN_GITHUB }}
        commit-message: "[docs]: synchronize styles from nixtla-commons - Triggered by Github Workflows"
